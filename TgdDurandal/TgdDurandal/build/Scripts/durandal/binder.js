define(["durandal/system","knockout"],function(e,t){function n(t){return void 0===t?{applyBindings:!0}:e.isBoolean(t)?{applyBindings:t}:(void 0===t.applyBindings&&(t.applyBindings=!0),t)}function i(i,s,l,v){if(!s||!l)return r.throwOnErrors?e.error(a):e.log(a,s,v),void 0;if(!s.getAttribute)return r.throwOnErrors?e.error(o):e.log(o,s,v),void 0;var f=s.getAttribute("data-view");try{var d;return i&&i.binding&&(d=i.binding(s)),d=n(d),r.binding(v,s,d),d.applyBindings?(e.log("Binding",f,v),t.applyBindings(l,s)):i&&t.utils.domData.set(s,u,{$data:i}),r.bindingComplete(v,s,d),i&&i.bindingComplete&&i.bindingComplete(s),t.utils.domData.set(s,c,d),d}catch(g){g.message=g.message+";\nView: "+f+";\nModuleId: "+e.getModuleId(v),r.throwOnErrors?e.error(g):e.log(g.message)}}var r,a="Insufficient Information to Bind",o="Unexpected View Type",c="durandal-binding-instruction",u="__ko_bindingContext__";return r={binding:e.noop,bindingComplete:e.noop,throwOnErrors:!1,getBindingInstruction:function(e){return t.utils.domData.get(e,c)},bindContext:function(e,t,n){return n&&e&&(e=e.createChildContext(n)),i(n,t,e,n||(e?e.$data:null))},bind:function(e,t){return i(e,t,e,e)}}});